<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Puzzle de la Línea Platónica</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            padding: 20px;
        }
        h1, h2 {
            text-align: center;
        }
        #controls {
            text-align: center;
            margin-bottom: 20px;
        }
        #word-pool, .dropzone-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        .word {
            background-color: #ffffff;
            border: 2px solid #333333;
            border-radius: 5px;
            padding: 10px 15px;
            margin: 5px;
            cursor: grab;
            user-select: none;
        }
        .dropzone {
            background-color: #ffffff;
            border: 2px dashed #666666;
            border-radius: 5px;
            width: 200px;
            min-height: 100px;
            margin: 10px;
            padding: 10px;
        }
        .dropzone.over {
            border-color: #0000ff;
            background-color: #e0e0ff;
        }
        .columns {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .column h3 {
            margin-bottom: 10px;
        }
        #score {
            text-align: center;
            font-size: 1.2em;
            margin-top: 20px;
            display: none;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 1em;
            cursor: pointer;
        }
        @media (max-width: 800px) {
            .dropzone, .word {
                width: 45%;
            }
        }
    </style>
</head>
<body>

    <h1>Puzzle de la Línea Platónica</h1>
    <div id="controls">
        <button id="start-btn">Iniciar Juego</button>
        <button id="check-btn" disabled>Verificar Puntuación</button>
        <button id="reset-btn" disabled>Volver a Jugar</button>
    </div>

    <h2>Palabras Disponibles</h2>
    <div id="word-pool"></div>

    <div class="columns">
        <div class="column">
            <h3>Eikasia</h3>
            <div class="dropzone" id="eikasia-dropzone"></div>
        </div>
        <div class="column">
            <h3>Pistis</h3>
            <div class="dropzone" id="pistis-dropzone"></div>
        </div>
        <div class="column">
            <h3>Dianoia</h3>
            <div class="dropzone" id="dianoia-dropzone"></div>
        </div>
        <div class="column">
            <h3>Noesis</h3>
            <div class="dropzone" id="noesis-dropzone"></div>
        </div>
    </div>

    <div id="score"></div>

    <script>
        // Listas de ejemplos
        const eikasia = [
            "Filtros de Realidad Aumentada en Redes Sociales",
            "Publicidad con Imágenes Exageradas",
            "Realidad Virtual en Videojuegos",
            "Películas de Ciencia Ficción",
            "Series de Televisión Fantásticas",
            "Arte Digital Surrealista",
            "Memes de Internet",
            "Publicidad de Moda con Escenarios Ficticios",
            "Ilustraciones de Fantasía",
            "Animaciones 3D en Publicidad",
            "Escenografías de Teatro Fantásticas",
            "Aplicaciones de Realidad Aumentada",
            "Cómics y Novelas Gráficas",
            "Publicidad de Alimentos con Presentaciones Irreales",
            "Videos Musicales con Efectos Especiales",
            "Diseño Gráfico con Ilusiones Ópticas",
            "Aplicaciones de Edición de Fotos Creativas",
            "Escenarios Virtuales para Reuniones Online",
            "Pinturas Digitales de Paisajes Imaginarios",
            "Publicaciones en Redes Sociales que Muestran Vidas Idealizadas"
        ];

        const pistis = [
            "Confianza en las Vacunas Basada en Evidencia Científica",
            "Creencia en el Cambio Climático",
            "Fe en la Veracidad de Noticias de Fuentes Confiables",
            "Confianza en la Educación Formal",
            "Creencia en la Existencia de Leyes",
            "Fe en la Democracia como Sistema de Gobierno",
            "Confianza en los Principios Éticos Universales",
            "Creencia en la Eficacia de la Terapia Psicológica",
            "Fe en los Derechos Humanos",
            "Confianza en los Eventos Históricos Documentados",
            "Creencia en el Funcionamiento del Sistema Bancario",
            "Fe en la Realidad del Espacio Exterior",
            "Confianza en la Seguridad de la Tecnología de la Información",
            "Creencia en la Utilidad de las Energías Renovables",
            "Fe en la Veracidad de los Datos Económicos",
            "Creencia en los Derechos Laborales",
            "Confianza en los Avances Médicos",
            "Fe en la Importancia de la Conservación Ambiental",
            "Confianza en la Estabilidad de los Mercados Financieros",
            "Creencia en la Eficacia de las Campañas de Salud Pública"
        ];

        const dianoia = [
            "Resolución de Ecuaciones Matemáticas Complejas",
            "Diseño de Planes de Negocios Basados en Análisis de Mercado",
            "Desarrollo de Algoritmos Informáticos",
            "Análisis de Datos Estadísticos para Tomar Decisiones Informadas",
            "Planificación de Proyectos de Ingeniería con Estructura Lógica",
            "Interpretación de Textos Legales para Aplicarlos a Casos Específicos",
            "Diagnósticos Médicos Basados en Síntomas y Pruebas",
            "Desarrollo de Teorías Científicas mediante el Método Científico",
            "Análisis y Construcción de Argumentos Filosóficos",
            "Diseño de Estrategias de Marketing Basadas en Tendencias",
            "Planificación de Rutas de Transporte Eficientes",
            "Evaluación de Riesgos Financieros mediante Modelos Económicos",
            "Elaboración de Programas Educativos Basados en Teorías Pedagógicas",
            "Diseño de Estructuras Arquitectónicas siguiendo Principios de Ingeniería",
            "Simulaciones de Escenarios Climáticos",
            "Análisis de Comportamientos de Consumo en Estudios de Mercado",
            "Desarrollo de Políticas Públicas Basadas en Evidencias",
            "Cálculos de Ingeniería para Proyectos de Construcción",
            "Creación de Modelos de Negocio Innovadores",
            "Planificación de Campañas de Salud Pública Basadas en Datos"
        ];

        const noesis = [
            "Comprensión Profunda de la Justicia en Filosofía",
            "Intuición Matemática Avanzada",
            "Percepción de Principios Éticos Universales",
            "Apreciación Profunda del Arte y la Belleza",
            "Entendimiento Metafísico del Ser",
            "Unificación de Teorías Científicas Complejas",
            "Conexión entre Diferentes Formas de Conocimiento",
            "Visión Intuitiva de la Estructura del Universo",
            "Comprensión de la Libertad y la Responsabilidad",
            "Percepción de la Verdad Universal en Diversas Culturas",
            "Comprensión Directa de la Realidad Última",
            "Unidad de la Mente y el Cuerpo",
            "Naturaleza de la Conciencia Más Allá de sus Manifestaciones",
            "Visión Clara de la Causa y Efecto en Fenómenos Complejos",
            "Percepción de la Esencia de la Verdad en Debates Filosóficos",
            "Comprensión de la Existencia Más Allá de la Percepción Física",
            "Intuición de la Matemática Pura",
            "Percepción de la Esencia del Tiempo y el Espacio",
            "Comprensión de la Unidad de las Formas Platónicas",
            "Comprensión Directa y Completa de la Realidad sin Intermediarios"
        ];

        // Variables para almacenar las palabras seleccionadas
        let selectedWords = [];
        let correctAssignments = {};
        let score = 0;

        // Elementos del DOM
        const startBtn = document.getElementById('start-btn');
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        const wordPool = document.getElementById('word-pool');
        const scoreDiv = document.getElementById('score');

        const dropzones = {
            'eikasia': document.getElementById('eikasia-dropzone'),
            'pistis': document.getElementById('pistis-dropzone'),
            'dianoia': document.getElementById('dianoia-dropzone'),
            'noesis': document.getElementById('noesis-dropzone')
        };

        // Función para seleccionar aleatoriamente n elementos de una lista
        function getRandomElements(arr, n) {
            const shuffled = arr.slice(0);
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled.slice(0, n);
        }

        // Función para inicializar el juego
        function initializeGame() {
            // Limpiar cualquier juego anterior
            wordPool.innerHTML = '';
            scoreDiv.style.display = 'none';
            scoreDiv.innerText = '';
            Object.values(dropzones).forEach(dz => dz.innerHTML = '');
            checkBtn.disabled = true;
            resetBtn.disabled = true;

            // Seleccionar 3 palabras de cada categoría
            const selectedEikasia = getRandomElements(eikasia, 3);
            const selectedPistis = getRandomElements(pistis, 3);
            const selectedDianoia = getRandomElements(dianoia, 3);
            const selectedNoesis = getRandomElements(noesis, 3);

            // Guardar las asignaciones correctas
            correctAssignments = {};
            selectedEikasia.forEach(word => { correctAssignments[word] = 'eikasia'; });
            selectedPistis.forEach(word => { correctAssignments[word] = 'pistis'; });
            selectedDianoia.forEach(word => { correctAssignments[word] = 'dianoia'; });
            selectedNoesis.forEach(word => { correctAssignments[word] = 'noesis'; });

            // Combinar y mezclar todas las palabras
            selectedWords = [...selectedEikasia, ...selectedPistis, ...selectedDianoia, ...selectedNoesis];
            shuffleArray(selectedWords);

            // Crear elementos de palabra y agregarlos al word pool
            selectedWords.forEach(word => {
                const wordDiv = document.createElement('div');
                wordDiv.classList.add('word');
                wordDiv.setAttribute('draggable', 'true');
                wordDiv.innerText = word;
                wordPool.appendChild(wordDiv);
            });

            // Añadir eventos de drag and drop
            addDragAndDropHandlers();
        }

        // Función para mezclar un array (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Variables para drag and drop
        let draggedElement = null;

        // Función para añadir manejadores de drag and drop
        function addDragAndDropHandlers() {
            const words = document.querySelectorAll('.word');
            words.forEach(word => {
                word.addEventListener('dragstart', dragStart);
                word.addEventListener('dragend', dragEnd);
            });

            Object.values(dropzones).forEach(dropzone => {
                dropzone.addEventListener('dragover', dragOver);
                dropzone.addEventListener('drop', drop);
                dropzone.addEventListener('dragenter', dragEnter);
                dropzone.addEventListener('dragleave', dragLeave);
            });

            wordPool.addEventListener('dragover', dragOver);
            wordPool.addEventListener('drop', dropToPool);
            wordPool.addEventListener('dragenter', dragEnterPool);
            wordPool.addEventListener('dragleave', dragLeavePool);
        }

        // Manejadores de eventos
        function dragStart(e) {
            draggedElement = this;
            setTimeout(() => {
                this.style.display = 'none';
            }, 0);
        }

        function dragEnd(e) {
            setTimeout(() => {
                this.style.display = 'block';
                draggedElement = null;
            }, 0);
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function dragEnter(e) {
            e.preventDefault();
            this.classList.add('over');
        }

        function dragLeave(e) {
            this.classList.remove('over');
        }

        function drop(e) {
            e.preventDefault();
            this.classList.remove('over');
            if (this.children.length >= 3) {
                alert('Esta columna ya tiene 3 palabras.');
                return;
            }
            if (draggedElement) {
                this.appendChild(draggedElement);
                checkAllPlaced();
            }
        }

        function dropToPool(e) {
            e.preventDefault();
            this.classList.remove('over');
            if (draggedElement) {
                this.appendChild(draggedElement);
                checkAllPlaced();
            }
        }

        function dragEnterPool(e) {
            e.preventDefault();
            this.classList.add('over');
        }

        function dragLeavePool(e) {
            this.classList.remove('over');
        }

        // Función para verificar si todas las palabras están colocadas
        function checkAllPlaced() {
            const totalPlaced = Object.values(dropzones).reduce((acc, dz) => acc + dz.children.length, 0);
            if (totalPlaced === 12) {
                checkBtn.disabled = false;
            } else {
                checkBtn.disabled = true;
            }
        }

        // Función para verificar la puntuación
        function checkScore() {
            score = 0;
            Object.entries(correctAssignments).forEach(([word, category]) => {
                const dropzone = dropzones[category];
                for (let child of dropzone.children) {
                    if (child.innerText === word) {
                        score++;
                        break;
                    }
                }
            });
            scoreDiv.innerText = `Tienes ${score} aciertos de 12.`;
            scoreDiv.style.display = 'block';
            resetBtn.disabled = false;
        }

        // Event listeners para los botones
        startBtn.addEventListener('click', () => {
            initializeGame();
            startBtn.disabled = true;
            resetBtn.disabled = true;
            scoreDiv.style.display = 'none';
        });

        checkBtn.addEventListener('click', () => {
            checkScore();
            checkBtn.disabled = true;
        });

        resetBtn.addEventListener('click', () => {
            initializeGame();
            checkBtn.disabled = true;
            resetBtn.disabled = true;
            scoreDiv.style.display = 'none';
            startBtn.disabled = false; // Habilita el botón de inicio para una nueva partida
        });

        // Permitir reiniciar el juego desde el inicio
        window.addEventListener('load', () => {
            // Inicializar sin palabras hasta que se presione "Iniciar Juego"
        });
    </script>

</body>
</html>
